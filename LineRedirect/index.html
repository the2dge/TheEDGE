<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="canonical" href="https://www.mrbean.tw">
  <link rel="icon" type="image/png" href="https://i.postimg.cc/Nf8M6szk/mrbean.jpg">
  <meta name="keywords" content="超低溫烘焙,精品堅果, 養生堅果,堅果多,營養早餐">
  <title>荳荳先生精品堅果 超低溫養生堅果</title>
</head>
<body>
  <div id="iframe-container"></div>
 <div id="store-info" style="display: none;">
    <h2>Store Information</h2>
    <p id="store-name"></p>
    <p id="store-address"></p>
    <p id="store-code"></p>
  </div>
  <script>
    // Function to extract URL parameters
    function getQueryParameter(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    // Capture parameters from the URL
    const checkout = getQueryParameter('checkout');
    const userId = getQueryParameter('userId');
    const orderId = getQueryParameter('orderId');
    const targetUrl = getQueryParameter('targetUrl');
    

    // Build the original WebApp URL
    const webAppUrl = `https://script.google.com/macros/s/AKfycbwWxseNeX_TUhPAyqDns8oz5u2KjieQVXf3LAjcPtms-sq5ObbVKRTaxdpRdCe8r9RU/exec?orderId=${orderId}&checkout=${checkout}&userId=${userId}&targetUrl=${targetUrl}`;
    
    // Log the WebApp URL for debugging
    console.log('Redirecting back to WebApp:', webAppUrl);

    // Embed the WebApp in an iframe or redirect to the WebApp
    if (orderId) {
      const iframeContainer = document.getElementById('iframe-container');
      iframeContainer.innerHTML = `<iframe src="${webAppUrl}" width="100%" height="600px" style="border:none;"></iframe>`;
    } else {
      console.error('Order ID is missing!');
    }
  </script>
</body>
</html>
